(function(){var e={2918:function(e,t,n){"use strict";var s=n(9242),r=n(3396);const i={class:"flex flex-wrap justify-between1 w-5/6 h-5/6 gap-7"};function o(e,t,n,s,o,a){const u=(0,r.up)("VHeader"),l=(0,r.up)("TheUsers"),c=(0,r.up)("TheSettings");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(u),(0,r._)("main",i,[(0,r.Wm)(l),(0,r.Wm)(c)])],64)}const a={class:"absolute top-4 flex justify-between items-center gap-4 justify-self-center text-white"},u=(0,r.uE)('<a href="https://github.com/LlONED/cmdGenerator" target="_blank"><svg height="22" fill="currentColor" viewBox="0 0 16 16" width="22"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a><a href="https://discord.gg/GXXcRmuqAT" target="_blank"><svg width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path></svg></a>',2);function l(e,t,n,s,i,o){return(0,r.wg)(),(0,r.iD)("nav",a,[(0,r.Uk)(" → "),u,(0,r.Uk)(" ← ")])}var c={name:"VHeader"},d=n(89);const p=(0,d.Z)(c,[["render",l]]);var m=p;const v={class:"list-none cnt-block gap-3 flex-[7] p-[10px] flex-col max-w-full rounded-lg text-white overflow-y-scroll scrollbar"};function h(e,t,n,s,i,o){const a=(0,r.up)("TheResult"),u=(0,r.up)("TheEventSettings"),l=(0,r.up)("TheEventAutomation"),c=(0,r.up)("TheOptions");return(0,r.wg)(),(0,r.iD)("ul",v,[(0,r.Wm)(a),(0,r.Wm)(u),""!==e.currentPreset.id?((0,r.wg)(),(0,r.j4)(l,{key:0})):(0,r.kq)("",!0),(0,r.Wm)(c)])}const f={class:"flex flex-wrap gap-2"};function g(e,t,n,s,i,o){const a=(0,r.up)("v-textarea"),u=(0,r.up)("v-button"),l=(0,r.up)("setting-item");return(0,r.wg)(),(0,r.j4)(l,{settingTitle:"Результат"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{value:e.commandResult,class:"h-60"},null,8,["value"]),(0,r._)("div",f,[(0,r.Wm)(u,{class:"p-3",onClick:o.saveEventsStats},{default:(0,r.w5)((()=>[(0,r.Uk)("скачать отчёт ")])),_:1},8,["onClick"]),(0,r.Wm)(u,{class:"p-3",onClick:o.resetPrizeCount},{default:(0,r.w5)((()=>[(0,r.Uk)("сброс выдач")])),_:1},8,["onClick"]),(0,r.Wm)(u,{class:"p-3",onClick:o.resetCoins},{default:(0,r.w5)((()=>[(0,r.Uk)("сброс коинов")])),_:1},8,["onClick"])])])),_:1})}var w=n(65),C=n(7139);const y={class:"w-full flex flex-col gap-2"},_={class:"text-center text-lg font-bold"};function b(e,t,n,s,i,o){return(0,r.wg)(),(0,r.iD)("li",y,[(0,r._)("h1",_,(0,C.zw)(n.settingTitle),1),(0,r.WI)(e.$slots,"default")])}var T={name:"SettingItem",props:{settingTitle:{type:String,required:!0}}};const k=(0,d.Z)(T,[["render",b]]);var P=k,U={name:"TheResult",components:{SettingItem:P},computed:{...(0,w.Se)({commandResult:"commandResult",defaultCoins:"defaultCoins",defaultPrizeCount:"defaultPrizeCount",currentServer:"currentServer"})},methods:{...(0,w.OI)({updateUsers:"updateUsers"}),resetPrizeCount(){this.updateUsers((e=>(e.prizeCount=this.defaultPrizeCount,e)))},resetCoins(){this.updateUsers((e=>(e.coins=this.defaultCoins,e)))},saveEventsStats(){let e=[...document.querySelectorAll('[data-modalId="time"]')].map((e=>{e.style.display="flex";let t=e.innerText.replace("\nкопировать\nx","");return e.style.display="none",t})).join("\n\n\n\n");const t=document.createElement("a");t.href=window.URL.createObjectURL(new Blob([e],{type:"text/plain"})),t.download=`${this.currentServer}.txt`,t.click()}}};const x=(0,d.Z)(U,[["render",g]]);var S=x;const I=(0,r._)("span",null,"Выбор ивента",-1);function E(e,t,n,s,i,o){const a=(0,r.up)("v-button"),u=(0,r.up)("time-result"),l=(0,r.up)("option-modal"),c=(0,r.up)("v-input-text"),d=(0,r.up)("v-input-select"),p=(0,r.up)("option-configurable"),m=(0,r.up)("setting-item");return(0,r.wg)(),(0,r.j4)(m,{settingTitle:"Настройка ивента"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modalTitle:"История активности ивентов",modalId:"time"},{description:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(o.formatedTitleTime),1)])),buttons:(0,r.w5)((()=>[(0,r.Wm)(a,{onClick:t[0]||(t[0]=t=>e.copyTimeText("История активности ивентов"))},{default:(0,r.w5)((()=>[(0,r.Uk)("копировать")])),_:1})])),body:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"timeResult",times:e.eventsTime},null,8,["times"])])),options:(0,r.w5)((()=>[!1===e.isEventActive?((0,r.wg)(),(0,r.j4)(a,{key:0,class:"p-2",onClick:o.allEventsEndToggle},{default:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(e.isEventsStopped?"начать":"завершить"),1)])),_:1},8,["onClick"])):(0,r.kq)("",!0),!1===e.isEventsStopped?((0,r.wg)(),(0,r.j4)(a,{key:1,class:"p-2",onClick:o.eventTimeToggle},{default:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(e.isEventActive?"стоп":"старт"),1)])),_:1},8,["onClick"])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(p,null,{description:(0,r.w5)((()=>[(0,r.Wm)(c,{placeholder:"id сервера",value:e.currentPreset.id,onInput:o.setServerId,class:"w-1/2"},null,8,["value","onInput"])])),option:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"w-48",options:e.servers,defaultOption:e.currentServer,onInput:e.setCurrentServer},null,8,["options","defaultOption","onInput"])])),_:1}),o.eventKeys.length>1?((0,r.wg)(),(0,r.j4)(p,{key:0},{description:(0,r.w5)((()=>[I])),option:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"w-48",options:o.eventKeys,defaultOption:e.currentPreset.currentEvent,onInput:o.setCurrentEvent},null,8,["options","defaultOption","onInput"])])),_:1})):(0,r.kq)("",!0)])),_:1})}n(2262),n(4506);const D={Init:"начало перерыва",EndActions:"конец перерыва",Start:"начало ивента",End:"конец ивента"},O={Raiting:"рейтинг",Time:"время"},A={Default:"дефолт 0",Default_10:"дефолт 10",Default_close:"дефолт клоз",Film:"просмотр фильма",DBD_pub_close:"DBD pub",DBD_full_close:"DBD full"},W={Disabled:"отключен",Activated:"активирован",Join:"подключился",Leave:"отключился",Init:"добавлен"},$={Online:"онлайн",Offline:"оффлайн",Init:"добавлен"},z={Event:"Event",Other:"Other"},j={isOnline:!0,ms:0,action:Object.assign({},W,D)},M={type:z,start:0,end:-1,index:-1,points:[j]||0},L={actions:[M],online:0};n(7658);function q(e=j.action){switch(e){case W.Leave:return!1;case W.Join:return!0;case W.Disabled:return!1;case W.Activated:return!0}}function R(e=0,t={isMs:!0}){let n=Math.floor(e/1e3);const s=Math.floor(n/3600);n=Math.floor(n%3600);const r=Math.floor(n/60);return n=Math.floor(n%60),e=t.isMs?":"+e.toString().slice(-3):"",`${s>9?s:"0"+s}:${r>9?r:"0"+r}:${n>9?n:"0"+n}${e}`}function N(e=L.actions){return Z(e.at(-1))}function Z(e=M){let t=-1===e.end?Date.now()-e.start:e.end-e.start,n=0,s=0;for(let r=0;r<e.points.length;r++){const t=e.points[r],i=e.points[r-1];t.isOnline!==i?.isOnline&&(!1===t.isOnline?s=t.ms:!0===t.isOnline&&0!==s&&(n+=t.ms-s))}return t-n}function V(e=L.actions){let t={arr:[],ms:0},n={arr:[],ms:0};for(const s of e){const e=Z(s);t.ms+=e,t.arr.push(e),s.type===z.Event&&(n.ms+=e,n.arr.push(e))}return{all:t,events:n}}function B(e=L,t=0,n=!1){const s=[...e.actions],r=s.at(-1);return r.end=Date.now(),s.push({type:n?z.Other:z.Event,index:n?-1:t,start:Date.now(),end:-1,points:[]}),{actions:s,online:e.online}}function F(e=L,t=[j.action]){let n=[...e.actions];const s=n.at(-1);for(let r of t){const e={isOnline:q(r),action:r,ms:Date.now()};s.points.push(e)}return{actions:n,online:e.online}}function H(e=L,t=!1){return!0===t?(e.actions=[...e.actions,{type:z.Other,index:-1,start:Date.now(),end:-1,points:[]}],e):(e.actions.at(-1).end=Date.now(),e)}var J={methods:{copy(e="",t=!0){if(""!==e)return navigator?.clipboard?(navigator.clipboard.writeText(e),void(t&&alert("Данные были успешно скопированы в буфер обмена"))):void alert("Ваш браузер не поддерживает копирование в буфер обмена (")},copyTimeText(e=""){this.$nextTick((()=>{this.copy((""===e?"":e+"\n\n")+this.$refs.timeResult.$el.innerText)}))}}};const K={class:"content-field p-2.5 w-full flex flex-wrap items-center gap-2 justify-center lg:justify-between"},Y={class:"flex items-center gap-2"};function G(e,t,n,s,i,o){const a=(0,r.up)("v-modal");return(0,r.wg)(),(0,r.iD)("div",K,[(0,r.Wm)(a,{modalTitle:n.modalTitle,modalId:n.modalId,show:e.showModal,onClose:e.closeModal},{buttons:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"buttons")])),body:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"body")])),_:3},8,["modalTitle","modalId","show","onClose"]),(0,r._)("span",{class:"cursor-pointer",onClick:t[0]||(t[0]=(...t)=>e.openModal&&e.openModal(...t))},[(0,r.WI)(e.$slots,"description")]),(0,r._)("div",Y,[(0,r.WI)(e.$slots,"options")])])}var X={data(){return{showModal:!1}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1}}},Q={name:"OptionModal",mixins:[X],props:{modalTitle:{type:String,required:!0},modalId:{type:String}}};const ee=(0,d.Z)(Q,[["render",G]]);var te=ee;const ne={class:"content-field p-2.5"},se={class:"w-full flex flex-wrap items-center gap-2 justify-center lg:justify-between"};function re(e,t,n,s,i,o){return(0,r.wg)(),(0,r.iD)("div",ne,[(0,r._)("div",se,[(0,r.WI)(e.$slots,"description"),(0,r.WI)(e.$slots,"option")])])}var ie={name:"OptionConfigurable"};const oe=(0,d.Z)(ie,[["render",re]]);var ae=oe;const ue={class:"flex flex-col gap-3"},le={key:0,class:"p-2 flex flex-col"};function ce(e,t,n,s,i,o){const a=(0,r.up)("time-action");return(0,r.wg)(),(0,r.iD)("div",ue,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.times.actions,((e,t)=>((0,r.wg)(),(0,r.j4)(a,{key:Math.floor(1e10*Math.random()),action:e,online:o.onlineActions.all.arr[t]},null,8,["action","online"])))),128)),this.onlineActions.events.ms>100?((0,r.wg)(),(0,r.iD)("p",le,[(0,r._)("span",null,"Онлайн ивентов: "+(0,C.zw)(o.formatedOnlineResult.events),1),(0,r._)("span",null,"Общий онлайн: "+(0,C.zw)(o.formatedOnlineResult.all),1)])):(0,r.kq)("",!0)])}const de={class:"flex flex-col gap-3 p-2"},pe={class:""},me={key:0};function ve(e,t,n,s,i,o){const a=(0,r.up)("time-point");return(0,r.wg)(),(0,r.iD)("p",de,[(0,r._)("h2",pe,(0,C.zw)(o.actionTitle),1),0!==n.action.points.length?((0,r.wg)(),(0,r.iD)("ul",me,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.action.points,(e=>((0,r.wg)(),(0,r.j4)(a,{point:e,key:Math.floor(1e10*Math.random())},null,8,["point"])))),128))])):(0,r.kq)("",!0)])}const he={class:"flex items-center text-sm list-mark"},fe=(0,r._)("span",{class:"appearance-none opacity-0 w-0 h-0"}," • ",-1);function ge(e,t,n,s,i,o){return(0,r.wg)(),(0,r.iD)("li",he,[(0,r._)("span",null,[fe,(0,r.Uk)((0,C.zw)(o.formatedPoint),1)])])}var we={name:"TimePoint",props:{point:{type:Object,required:!0}},computed:{formatedPoint(){const e=this.point,t=new Date(e.ms);return`${t.toLocaleTimeString()} | ${e.action}`}}};const Ce=(0,d.Z)(we,[["render",ge]]);var ye=Ce,_e={name:"TimeAction",components:{TimePoint:ye},props:{action:{type:Object,required:!0},online:{type:Number,required:!0}},computed:{actionTitle(){const e=this.action,t=this.online,n=new Date(e.start),s=n.toLocaleDateString(),r=new Date(e.end),i=r.toLocaleDateString();let o=-1===e.end?`${n.toLocaleTimeString()} - текущий момент`:`${n.toLocaleTimeString()} - ${r.toLocaleTimeString()} (${R(t)})`;return`${e.type===z.Event?`${e.index+1}-й ивент`:"перерыв"} ${-1!==e.end&&s!==i?`${s} - ${i}`:s}: ${o}`}}};const be=(0,d.Z)(_e,[["render",ve]]);var Te=be,ke={name:"TimeResult",components:{TimeAction:Te},props:{times:{type:Object,required:!0}},computed:{onlineActions(){return V(this.times.actions)},formatedOnlineResult(){const e=this.onlineActions;return{events:R(e.events.ms),all:R(e.all.ms)}}}};const Pe=(0,d.Z)(ke,[["render",ce]]);var Ue=Pe,xe={components:{SettingItem:P,OptionModal:te,OptionConfigurable:ae,TimeResult:Ue},name:"TheEventSettings",mixins:[J],methods:{...(0,w.OI)({setCurrentServer:"setCurrentServer",updateCurrentPreset:"updateCurrentPreset",updateUsers:"updateUsers",updaterStart:"updaterStart",updaterStop:"updaterStop",updaterAddFunction:"updaterAddFunction",eventsEndToggle:"eventsEndToggle",eventActionToggle:"eventActionToggle",eventSetOnline:"eventSetOnline"}),allEventsEndToggle(){const e=this.isEventsStopped;this.eventsEndToggle(e),this.updateUsers((t=>(t.times=H(t.times,e),t)))},setServerId(e){this.updateCurrentPreset((t=>(t.id=e,t)))},eventStart(){this.updateUsers((e=>(e.isActive&&(e.times=B(e.times,this.eventCount,this.isEventActive)),e))),this.eventSetOnline(1),this.eventActionToggle(),this.updaterStart()},eventStop(){this.updateUsers((e=>((e.isActive||e.times.actions.at(-1).type===z.Event)&&(e.times=B(e.times,this.eventCount,this.isEventActive)),e))),this.eventActionToggle(),this.updaterStop()},eventTimeToggle(){this.isEventActive?this.eventStop():this.eventStart()},eventUpdaterToggle(){this.isUpdaterActive?this.updaterStop():this.updaterStart()},setCurrentEvent(e){this.updateCurrentPreset((t=>(t.currentEvent=e,t)))}},computed:{...(0,w.Se)({currentServer:"currentServer",currentPreset:"currentPreset",currentPresetEvent:"currentPresetEvent",servers:"servers",eventsTime:"eventsTime",eventCount:"eventCount",isEventActive:"isEventActive",isEventsStopped:"isEventsStopped",isUpdaterActive:"isUpdaterActive"}),eventKeys(){return Object.keys(this.currentPreset.events)},formatedTime(){return formatTimeActions(this.eventsTime.actions)},formatedTitleTime(){if(!0===this.isEventsStopped)return'Нажмите "начать" для начала перерыва';const e=this.eventsTime,t=e.actions.find((e=>e.type===z.Event));if(void 0===t)return'Нажмите "старт" для начала ивента';const n=new Date(t.start).toLocaleTimeString();return`${n} `+R(e.online,{isMs:!1})}},created(){this.updaterAddFunction((()=>{this.updateUsers((e=>{if(e.isActive&&(e.times.online=V(e.times.actions).events.ms,this.currentPresetEvent.type===O.Time)){const t=e.times.online/1e3/60;e.coins=Math.floor(t/this.currentPresetEvent.minutesPerPeriod)*this.currentPresetEvent.coinsPerPeriod}return e}))})),this.updaterAddFunction((()=>{this.eventSetOnline(N(this.eventsTime.actions))}))}};const Se=(0,d.Z)(xe,[["render",E]]);var Ie=Se;const Ee=(0,r._)("div",{class:"flex flex-col gap-5"},[(0,r._)("p",null," Дискорд токен треубется для отслеживания и логирования действий пользователей. "),(0,r._)("p",{class:"flex flex-col gap-2"},[(0,r.Uk)(" Проверить добросовестное использование токена со стороны сайта можно следующими способами: "),(0,r._)("ol",null,[(0,r._)("li",null,[(0,r.Uk)(" 1) Посмотреть исходный код сайта "),(0,r._)("a",{href:"https://github.com/LlONED/cmdGenerator",target:"_blank",class:"underline text-blue-500"},"https://github.com/LlONED/cmdGenerator")]),(0,r._)("li",null,' 2) Посмотреть запросы отправляемые сайтом в интруметах разработчика. (Вкладка "Network" (Сеть)). ')])]),(0,r._)("p",{class:"flex flex-col gap-2"},[(0,r.Uk)(" Инструкция для получения токена: "),(0,r._)("ol",null,[(0,r._)("li",null,"1) Зарегистрировать новый аккаунт в дискорде (желательно использовать email, который не был связан с основным аккаунтом)"),(0,r._)("li",null,"2) Зайти на сервер, на котором будет производиться отслеживание голосового канала (Прохождение верификации не требуется)"),(0,r._)("li",null,'3) Перейти в инструменты разработчика (клавиша F12) -> Вкладка "Network (Сеть)" -> раздел "Fetch/XHR"'),(0,r._)("li",null,"4) Обновить страницу"),(0,r._)("li",null,'5) Найти и нажать ЛКМ на запрос содержащий "messages?limit"'),(0,r._)("li",null,'6) В открывшимся справа окне перейти в раздел "Headers (Заголовки)"'),(0,r._)("li",null,'7) В "Request Headers (Заголовки запросов)" найти поле "authorization" -> ПКМ -> копировать значение'),(0,r._)("li",null,"8) Сохранить токен в надёжном месте")])]),(0,r._)("p",null,[(0,r._)("strong",null,"Внимание!!!"),(0,r.Uk)(" Не используйте токен от основного аккаунта дискорда! Частое использование токена путём копирования, хранения в файле повышает вероятность его обнаружения. "),(0,r._)("br"),(0,r.Uk)("Надёжная и безопасная альтернатива - регистрация нового аккаунта в дискорде ")])],-1);function De(e,t,n,i,o,a){const u=(0,r.up)("v-input-text"),l=(0,r.up)("option-modal"),c=(0,r.up)("option-input"),d=(0,r.up)("connection-manager"),p=(0,r.up)("setting-item");return(0,r.wg)(),(0,r.j4)(p,{settingTitle:"Автоматизация ивента"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modalTitle:"зачем нужен дискорд токен?"},{description:(0,r.w5)((()=>[(0,r.Uk)(" дискорд токен (описание*) ")])),body:(0,r.w5)((()=>[Ee])),options:(0,r.w5)((()=>[(0,r.Wm)(u,{placeholder:"токен",value:o.discordToken,hidden:!0,onInput:a.setDiscordToken},null,8,["value","onInput"])])),_:1}),(0,r.wy)((0,r.Wm)(c,{description:"id голосового канала"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{placeholder:"id",value:o.voiceChatId,onInput:a.setVoiceChatId},null,8,["value","onInput"])])),_:1},512),[[s.F8,a.isDiscordTokenValid]]),(0,r.wy)((0,r.Wm)(d,{token:o.discordToken,serverId:e.currentPreset.id,voiceChatId:o.voiceChatId,users:e.users,onActionsUpdate:a.actionsUpdate},null,8,["token","serverId","voiceChatId","users","onActionsUpdate"]),[[s.F8,o.voiceChatId.length>6]])])),_:1})}const Oe={Init:"инициализирован",Disconnect:"отключён",Connect:"подключён",Loading:"загрузка"},Ae={Init:"Init",Update:"Update"},We={Connect:"подключиться",Loading:"загрузка",Disconnect:"отключиться"},$e={FailedConnect:"Ошибка в подключении к сокетам, возможно токен введён неверно, или для вашего аккаунта была временно заблокирована возможность подключаться к сокетам"},ze={key:0,class:"flex flex-col gap-3"},je={key:1,class:"flex items-center"};function Me(e,t,n,s,i,o){const a=(0,r.up)("v-button"),u=(0,r.up)("option-modal");return(0,r.wg)(),(0,r.j4)(u,{modalTitle:"Логи ошибок"},{description:(0,r.w5)((()=>[(0,r.Uk)("управление соединением (просмотр логов*)")])),body:(0,r.w5)((()=>[i.logs.length>0?((0,r.wg)(),(0,r.iD)("div",ze,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.logs,(e=>((0,r.wg)(),(0,r.iD)("p",{key:Math.floor(1e7*Math.random())},(0,C.zw)(e),1)))),128))])):((0,r.wg)(),(0,r.iD)("div",je,"логи отсутствуют"))])),options:(0,r.w5)((()=>[(0,r.Wm)(a,{class:"p-2 flex justify-between items-center gap-3",disabled:o.isDisabled,onClick:o.toggleConnection},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,C.zw)(o.buttonText),1),(0,r._)("div",{class:(0,C.C_)(o.statusClassName)},null,2)])),_:1},8,["disabled","onClick"])])),_:1})}const Le=e=>new Promise((t=>setTimeout(t,e)));let qe=null,Re=null,Ne=0;var Ze={name:"ConnectionManager",components:{OptionModal:te},data(){return{status:Oe.Init,logs:[]}},emits:{actionsUpdate:null},props:{users:{type:Array,required:!0},token:{type:String,required:!0},voiceChatId:{type:String,required:!0},serverId:{type:String,required:!0}},methods:{async toggleConnection(){switch(this.status){case Oe.Disconnect:case Oe.Init:return await this.setLoading(5e3),void this.connect({isInit:!0});case Oe.Connect:return await this.setLoading(5e3),void this.disconnect()}},connect(e={isInit:!1}){qe=new WebSocket("wss://gateway.discord.gg/?v=9&encoding=json");const t=JSON.stringify({op:2,d:{token:this.token,properties:{$os:"windows",$browser:"chrome",$device:"pc"}}}),n=setTimeout((()=>{this.errorLog($e.FailedConnect)}),5e3);qe.onopen=function(){qe.send(t)},qe.onmessage=({data:t})=>{const{t:s,s:r,op:i,d:o}=JSON.parse(t);if(10!==i)if(9!==i)if(7!==i){if(!0===e.isInit&&"READY"===s&&o.guilds.some((e=>e.id===this.serverId))){const e=JSON.stringify({op:14,d:{guild_id:this.serverId,activities:!0,threads:!0,typing:!0}});qe.send(e),clearTimeout(n),this.status=Oe.Connect,this.heartbeatStart();const t=o.guilds.find((e=>e.id===this.serverId)),s=t.channels.find((e=>e.id===this.voiceChatId));return void 0===s&&this.errorLog("Канал не найден"),void this.actionsUpdate({action:Ae.Init,userActions:t.voice_states.filter((e=>e.channel_id===this.voiceChatId)).map((e=>{const n=t.members.find((t=>t.user.id===e.user_id));return{action:W.Join,id:n.user.id,name:this.validateUserName(n.user.username,n.user.discriminator,n.nick)}}))})}if("VOICE_STATE_UPDATE"===s&&o.guild_id===this.serverId&&(o.channel_id===this.voiceChatId||null===o.channel_id)&&!1===o.member.user.bot){const e=this.users.find((e=>e.id===o.user_id));if(void 0===e&&this.voiceChatId===o.channel_id)return void this.actionsUpdate({action:Ae.Update,userActions:[{action:W.Join,id:o.user_id,name:this.validateUserName(o.member.user.username,o.member.user.discriminator,o.member.nick)}]});if(void 0!==e&&e.status!==$.Online&&this.voiceChatId===o.channel_id)return void this.actionsUpdate({action:Ae.Update,userActions:[{action:W.Join,id:o.user_id,name:this.validateUserName(o.member.user.username,o.member.user.discriminator,o.member.nick)}]});if(void 0!==e&&e.status===$.Online&&null===o.channel_id)return void this.actionsUpdate({action:Ae.Update,userActions:[{action:W.Leave,id:o.user_id,name:this.validateUserName(o.member.user.username,o.member.user.discriminator,o.member.nick)}]})}}else this.errorLog("Требуется переподключение");else this.errorLog("Ошибка сессии");else Ne=o.heartbeat_interval-500},qe.onerror=e=>{this.errorLog(e?.message||e?.msg||"ошибка в потоке сокетов")}},disconnect(){this.wsClose()},heartbeatStart(){Re=setInterval((()=>{if(1!==qe.readyState)return this.disconnect(),void this.connect();const e=JSON.stringify({op:1,d:null});qe.send(e)}),Ne)},wsClose(){this.status=Oe.Disconnect,qe.close(),qe=null,Ne=0,null!==Re&&(clearInterval(Re),Re=null)},async setLoading(e=0){this.status=Oe.Loading,await Le(e)},errorLog(e=""){this.logs.push(e),this.wsClose()},actionsUpdate(e={}){this.$emit("actionsUpdate",e)},validateUserName(e="",t="",n=""){return null===n?`${e}#${t}`:n}},computed:{isDisabled(){return this.status===Oe.Loading},buttonText(){switch(this.status){case Oe.Init:case Oe.Disconnect:return We.Connect;case Oe.Connect:return We.Disconnect;case Oe.Loading:return We.Loading}},statusClassName(){const e={[Oe.Init]:"bg-white",[Oe.Disconnect]:"bg-red-700",[Oe.Connect]:"bg-green-700",[Oe.Loading]:"bg-orange-700"};return`w-3 h-3 rounded-full ${e[this.status]}`}}};const Ve=(0,d.Z)(Ze,[["render",Me]]);var Be=Ve;const Fe={class:"content-field p-2.5"},He={class:"w-full flex flex-wrap items-center gap-2 justify-center lg:justify-between"};function Je(e,t,n,s,i,o){return(0,r.wg)(),(0,r.iD)("div",Fe,[(0,r._)("label",He,[(0,r._)("span",null,(0,C.zw)(n.description),1),(0,r.WI)(e.$slots,"default")])])}var Ke={name:"OptionInput",props:{description:{type:String,required:!0}}};const Ye=(0,d.Z)(Ke,[["render",Je]]);var Ge=Ye,Xe={name:"TheEventAutomation",components:{ConnectionManager:Be,SettingItem:P,OptionModal:te,OptionInput:Ge},data(){return{discordToken:"",voiceChatId:""}},methods:{...(0,w.OI)({addUser:"addUser",removeUser:"removeUser",updateUsers:"updateUsers",updateCurrentPreset:"updateCurrentPreset"}),setDiscordToken(e=""){this.discordToken=e},setVoiceChatId(e=""){this.voiceChatId=e},actionsUpdate({action:e=Ae,userActions:t=[{action:W,id:"",name:""}]}){for(const n of t)this.actionUpdate(n)},actionUpdate({action:e=W,id:t="",name:n=""}){const s=this.users.some((e=>e.id===t));e!==W.Join?e!==W.Leave||this.updateUsers((n=>(n.id!==t||(n.isActive=!1,n.status=$.Offline,n.times=F(n.times,[e])),n))):!0===s?this.updateUsers((n=>(n.id!==t||(n.isActive=!0,n.status=$.Online,n.times=F(n.times,[e])),n))):this.addUser({name:n,id:t,status:$.Online,isActive:!0,times:{actions:[{type:this.isEventActive?z.Event:z.Other,index:this.isEventActive?this.eventCount-1:-1,start:Date.now(),end:-1,points:[{ms:Date.now(),action:e,isOnline:!0}]}],online:0}})}},computed:{...(0,w.Se)({users:"users",currentPreset:"currentPreset",isEventActive:"isEventActive",eventCount:"eventCount"}),isDiscordTokenValid(){return this.discordToken.length>6&&3===this.discordToken.split(".").length}}};const Qe=(0,d.Z)(Xe,[["render",De]]);var et=Qe;const tt=(0,r._)("span",null,"Является ли команда персональной",-1),nt=(0,r._)("span",null,"Тип ивента",-1);function st(e,t,n,s,i,o){const a=(0,r.up)("v-input-checkbox"),u=(0,r.up)("option-configurable"),l=(0,r.up)("v-input-select"),c=(0,r.up)("v-input-number"),d=(0,r.up)("option-input"),p=(0,r.up)("v-input-text"),m=(0,r.up)("setting-item");return(0,r.wg)(),(0,r.j4)(m,{settingTitle:"Опции"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{description:(0,r.w5)((()=>[tt])),option:(0,r.w5)((()=>[(0,r.Wm)(a,{class:"w-6 h-6",checked:o.currentEvent.isCommandPersonal,onChange:o.setCommandPersonal},null,8,["checked","onChange"])])),_:1}),(0,r.Wm)(u,null,{description:(0,r.w5)((()=>[nt])),option:(0,r.w5)((()=>[(0,r.Wm)(l,{class:"w-48",options:Object.values(o.eventType),defaultOption:o.currentEvent.type,onInput:o.setEventType},null,8,["options","defaultOption","onInput"])])),_:1}),o.currentEvent.type===o.eventType.Time?((0,r.wg)(),(0,r.j4)(d,{key:0,description:"Минут в периоде"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{min:1,value:o.currentEvent.minutesPerPeriod,onInput:o.setMinutesPerPeriod},null,8,["value","onInput"])])),_:1})):(0,r.kq)("",!0),o.currentEvent.type===o.eventType.Time?((0,r.wg)(),(0,r.j4)(d,{key:1,description:"Коинов в периоде"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{min:0,value:o.currentEvent.coinsPerPeriod,onInput:o.setCoinsPerPeriod},null,8,["value","onInput"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,{description:"Дефолтное количество выдач"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{value:e.defaultPrizeCount,min:1,onInput:e.setDefaultPrizeCount},null,8,["value","onInput"])])),_:1}),(0,r.Wm)(d,{description:"Дефолтное количество коинов"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{min:1,value:o.currentEvent.coinsDefault,onInput:o.setDefaultCoins},null,8,["value","onInput"])])),_:1}),(0,r.Wm)(d,{description:"Команда выдачи"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onInput:o.setCommand,value:e.command},null,8,["onInput","value"])])),_:1}),(0,r.Wm)(d,{description:"Сепаратор аргументов"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{placeholder:"сепаратор",value:e.commandSeparator,onInput:o.setCommandSeparator},null,8,["value","onInput"])])),_:1}),(0,r.Wm)(d,{description:"Паттерн аргумента"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"w-full",value:e.commandPattern,onInput:o.setCommandPattern},null,8,["value","onInput"])])),_:1})])),_:1})}var rt={components:{SettingItem:P,OptionInput:Ge,OptionConfigurable:ae},name:"TheOptions",computed:{...(0,w.Se)({currentPreset:"currentPreset",command:"command",commandSeparator:"commandSeparator",commandPattern:"commandPattern",defaultPrizeCount:"defaultPrizeCount"}),eventType(){return O},currentEvent(){return this.currentPreset.events[this.currentPreset.currentEvent]}},methods:{...(0,w.OI)({updateCurrentPreset:"updateCurrentPreset",setDefaultPrizeCount:"setDefaultPrizeCount"}),setCommandPersonal(e){this.updateCurrentPreset((t=>(t.events[t.currentEvent].isCommandPersonal=e,t)))},setMinutesPerPeriod(e){this.updateCurrentPreset((t=>(t.events[t.currentEvent].minutesPerPeriod=+e,t)))},setCoinsPerPeriod(e){this.updateCurrentPreset((t=>(t.events[t.currentEvent].coinsPerPeriod=+e,t)))},setEventType(e){this.updateCurrentPreset((t=>(t.events[t.currentEvent].type=e,t)))},setDefaultCoins(e){this.updateCurrentPreset((t=>(t.events[t.currentEvent].coinsDefault=+e,t)))},setCommandSeparator(e){this.updateCurrentPreset((t=>""!==t.events[t.currentEvent].commandSeparator?(t.events[t.currentEvent].commandSeparator=e,t):(t.commandSeparator=e,t)))},setCommandPattern(e){this.updateCurrentPreset((t=>""!==t.events[t.currentEvent].commandPattern?(t.events[t.currentEvent].commandPattern=e,t):(t.commandPattern=e,t)))},setCommand(e){this.updateCurrentPreset((t=>""!==t.events[t.currentEvent].command?(t.events[t.currentEvent].command=e,t):(t.command=e,t)))}}};const it=(0,d.Z)(rt,[["render",st]]);var ot=it,at={components:{TheResult:S,TheEventAutomation:et,TheEventSettings:Ie,TheOptions:ot},name:"TheSettings",computed:{...(0,w.Se)({currentPreset:"currentPreset"})}};const ut=(0,d.Z)(at,[["render",h]]);var lt=ut;const ct={ref:"users",class:"cnt-block flex-[12] overflow-y-scroll overflow-x-hidden p-[10px] flex-col items-center rounded-lg scrollbar"};function dt(e,t,n,s,i,o){const a=(0,r.up)("UsersList"),u=(0,r.up)("v-button");return(0,r.wg)(),(0,r.iD)("div",ct,[(0,r.Wm)(a,{users:e.users,onRemoveUser:e.removeUser,onUpdateUser:e.updateUser},null,8,["users","onRemoveUser","onUpdateUser"]),(0,r.Wm)(u,{onClick:t[0]||(t[0]=e=>o.addUserAndUpdateScroll()),class:"px-3 py-2 mt-2"},{default:(0,r.w5)((()=>[(0,r.Uk)("+")])),_:1})],512)}const pt={class:"flex flex-col w-full gap-3"};function mt(e,t,n,s,i,o){const a=(0,r.up)("user-item");return(0,r.wg)(),(0,r.iD)("ol",pt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.users,(t=>((0,r.wg)(),(0,r.j4)(a,{key:t._key,user:t,index:e.activeUsers.findIndex((e=>e._key===t._key))+1||"#",eventCount:e.eventCount,isEventActive:e.isEventActive,onUpdateUser:o.updateUserEvent,onRemoveUser:o.removeUserEvent},null,8,["user","index","eventCount","isEventActive","onUpdateUser","onRemoveUser"])))),128))])}const vt={class:"content-field flex flex-wrap flex-row justify-between list-none p-4 items-center"},ht={class:"w-8 flex items-center"},ft={class:"flex flex-1 items-center"},gt={class:"flex flex-wrap flex-[7] justify-between items-center gap-3"},wt={class:"w-48 lg:w-40 flex justify-center"},Ct={class:"flex flex-wrap flex-[1] lg:justify-end justify-center items-center gap-3"};function yt(e,t,n,s,i,o){const a=(0,r.up)("v-button"),u=(0,r.up)("time-result"),l=(0,r.up)("v-modal"),c=(0,r.up)("v-input-text"),d=(0,r.up)("v-input-number"),p=(0,r.up)("v-input-checkbox");return(0,r.wg)(),(0,r.iD)("li",vt,[(0,r.Wm)(l,{modalTitle:o.modalTitle,show:e.showModal,modalId:"time",onClose:e.closeModal},{buttons:(0,r.w5)((()=>[(0,r.Wm)(a,{onClick:t[0]||(t[0]=t=>e.copyTimeText(o.modalTitle))},{default:(0,r.w5)((()=>[(0,r.Uk)("копировать")])),_:1})])),body:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"timeResult",times:n.user.times},null,8,["times"])])),_:1},8,["modalTitle","show","onClose"]),(0,r._)("div",ht,[(0,r._)("span",null,(0,C.zw)(n.index),1)]),(0,r._)("div",ft,[(0,r._)("div",gt,[(0,r.Wm)(c,{placeholder:"имя",value:n.user.name,onInput:o.updateUserName},null,8,["value","onInput"]),(0,r.Wm)(c,{placeholder:"тег | id",value:n.user.id,onInput:o.updateUserId},null,8,["value","onInput"]),(0,r.Wm)(d,{class:"lg:w-28",placeholder:"выдача",min:1,value:n.user.prizeCount,onInput:o.updateUserPrizeCount},null,8,["value","onInput"]),(0,r.Wm)(d,{class:"lg:w-28",placeholder:"коины",min:0,value:n.user.coins,onClick:t[1]||(t[1]=e=>e.target.select()),onInput:o.updateUserCoins},null,8,["value","onInput"]),(0,r._)("div",wt,[(0,r._)("span",{class:"cursor-pointer",onClick:t[2]||(t[2]=(...t)=>e.openModal&&e.openModal(...t))},(0,C.zw)(o.formatedTimeTitle),1)])]),(0,r._)("div",Ct,[(0,r.Wm)(p,{class:"w-6 h-6",checked:n.user.isActive,disabled:""===n.user.id,onChange:o.toggleActiveTimes},null,8,["checked","disabled","onChange"]),(0,r.Wm)(a,{class:"w-6 h-7",onClick:t[3]||(t[3]=e=>o.removeUserEvent(n.user._key))},{default:(0,r.w5)((()=>[(0,r.Uk)("-")])),_:1})])])])}var _t={name:"UserItem",components:{TimeResult:Ue},emits:{removeUser:null,updateUser:null},mixins:[J,X],props:{user:{type:Object,required:!0},index:{type:[String,Number],required:!0},eventCount:{type:Number,required:!0},isEventActive:{type:Boolean,required:!0}},methods:{toggleActiveTimes(e){this.$emit("updateUser",{_key:this.user._key,update:t=>!0===e&&!0===this.isEventActive&&this.user.times.actions.at(-1).type!==z.Event?(t.times=B(this.user.times,this.eventCount-1,!1),t.isActive=!0,t):!0===e?(t.times=F(this.user.times,[W.Activated]),t.isActive=!0,t):(t.times=F(this.user.times,[W.Disabled]),t.isActive=!1,t)})},updateUserName(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.name=e,t)})},updateUserId(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.id=e,t)})},updateUserCoins(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.coins=e,t)})},updateUserPrizeCount(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.prizeCount=e,t)})},updateUserActive(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.isActive=e,t)})},updateUserTimes(e){this.$emit("updateUser",{_key:this.user._key,update:t=>(t.times=e,t)})},removeUserEvent(e){this.$emit("removeUser",e)},formatTimeLastJoin(e=L.actions){let t=0;e:for(let n=e.length;n--;){const s=e[n];for(const e of s.points)if(e.action===W.Init||e.action===W.Join||e.action===W.Activated){t=e.ms;break e}}return t}},computed:{modalTitle(){return`история активности ${this.user.name||this.user.id?.slice(0,21)||"пользователя"}`},formatedTimeTitle(){const e=this.user.times,t=new Date(this.formatTimeLastJoin(e.actions)||e.actions.at(-1).start);return 0===e.online?`${t.toLocaleTimeString()} 00:00:00`:`${t.toLocaleTimeString()} ${R(e.online,{isMs:!1})}`}},watch:{"user.id"(e,t){""===e?this.toggleActiveTimes(!1):""===t&&""!==e&&this.toggleActiveTimes(!0)}}};const bt=(0,d.Z)(_t,[["render",yt]]);var Tt=bt,kt={name:"UsersList",emits:{removeUser:null,updateUser:null},components:{UserItem:Tt},props:{users:{type:Array,reqire:!0}},methods:{updateUserEvent(e){this.$emit("updateUser",e)},removeUserEvent(e){this.$emit("removeUser",e)}},computed:{...(0,w.Se)({activeUsers:"activeUsers",isEventActive:"isEventActive",eventCount:"eventCount"})}};const Pt=(0,d.Z)(kt,[["render",mt]]);var Ut=Pt,xt={name:"TheUsers",components:{UsersList:Ut},computed:{...(0,w.Se)({users:"users"})},methods:{...(0,w.OI)({addUser:"addUser",updateUser:"updateUser",removeUser:"removeUser"}),scrollBottom(){this.$nextTick((()=>{const e=this.$refs.users.scrollHeight,t=this.$refs.users.clientHeight;e>t&&(this.$refs.users.scrollTop=e)}))},addUserAndUpdateScroll(){this.addUser({}),this.scrollBottom()}},mounted(){this.addUser({})}};const St=(0,d.Z)(xt,[["render",dt]]);var It=St,Et={name:"App",components:{VHeader:m,TheSettings:lt,TheUsers:It}};const Dt=(0,d.Z)(Et,[["render",o]]);var Ot=Dt;function At(e=L.actions){return e.at(-1).type===z.Event}function Wt(e=L.actions){return e.filter((e=>e.type===z.Event)).length}function $t(e="",t={id:"",count:0,i:0,prizeCount:1}){const n=[{desc:"%i<count>%",required:["i"],pattern:new RegExp(/%i(\d)%/g),logic(e="",t=0){return e.replace(this.pattern,((e,n)=>+n<t+1?t+1:""))}},{desc:"%user%",required:["id"],pattern:new RegExp("%user%","g"),logic(e="",t=""){return e.replace(this.pattern,t)}},{desc:"%count%",required:["count","prizeCount"],pattern:new RegExp("%count%","g"),logic(e="",t=0,n=1){return e.replace(this.pattern,t*n)}}];for(const s of n)e=s.logic(e,...s.required.map((e=>t[e])));return e}function zt({isCommandPersonal:e,commandSeparator:t,commandPattern:n,command:s,users:r}){return!0===e?r.map(((e,r)=>s+t+$t(n,{id:e.id,count:e.coins,prizeCount:e.prizeCount,i:r}))).join("\n").trim():`${s} ${r.map(((e,t)=>$t(n,{id:e.id,count:e.coins,prizeCount:e.prizeCount,i:t}))).join(t)}`}function jt({coinsDefault:e=0,minutesPerPeriod:t=1,coinsPerPeriod:n=0,isCommandPersonal:s=!1,commandPattern:r="",commandSeparator:i="",command:o="",matchCase:a=[],type:u=O.Raiting}){return{coinsDefault:e,minutesPerPeriod:t,coinsPerPeriod:n,isCommandPersonal:s,commandPattern:r,commandSeparator:i,command:o,matchCase:a,type:u}}function Mt({id:e="",commandPattern:t="%user% %count%",commandSeparator:n=" ",command:s="/give",currentEvent:r=A.Default,events:i={[A.Default]:jt({}),[A.Default_10]:jt({coinsDefault:10,matchCase:["свояк","своя игра","codenames","пазлы"]})}}){return{id:e,commandPattern:t,commandSeparator:n,command:s,currentEvent:r,events:i}}var Lt={default:Mt({}),lounge:Mt({id:"254958490676625408",commandPattern:"пользователь%i1%:%user% количество%i1%:%count%",command:"/event prize",events:{[A.Default]:jt({}),[A.Default_10]:jt({coinsDefault:10,matchCase:["свояк","своя игра","codenames","пазлы"]}),[A.Default_close]:jt({type:O.Time,minutesPerPeriod:20,coinsPerPeriod:10,isCommandPersonal:!0,commandPattern:"пользователь:%user% количество:%count%",command:"/give",matchCase:["close","клоз"]}),[A.Film]:jt({type:O.Time,minutesPerPeriod:20,coinsPerPeriod:10,matchCase:["смотр","фильм"]}),[A.DBD_pub_close]:jt({type:O.Time,minutesPerPeriod:20,coinsPerPeriod:10,isCommandPersonal:!0,commandPattern:"пользователь:%user% количество:%count%",command:"/give",matchCase:["dbd pub"]}),[A.DBD_full_close]:jt({coinsDefault:10,isCommandPersonal:!0,commandPattern:"пользователь:%user% количество:%count%",command:"/give",matchCase:["dbd"]})}}),meta:Mt({id:"822354240713261068"}),hinomaru:Mt({id:"965383061749522502"}),futurama:Mt({id:"531970658633252864"}),heligate:Mt({id:"1001139842131955752"}),tenderly:Mt({id:"457902248660434944"}),hatory:Mt({id:"894663985650081864"})},qt=(0,w.MT)({state:()=>({users:[],eventsTime:{actions:[{type:z.Other,start:Date.now(),end:-1,index:-1,points:[]}],online:0},currentServer:"default",presets:Lt,defaultCoins:0,defaultPrizeCount:1,updater:{functions:[],refreshTimer:1e3,interval:null}}),getters:{users(e){return e.users},currentServer(e){return e.currentServer},currentPreset(e){return e.presets[e.currentServer]},currentPresetEvent(e){return e.presets[e.currentServer].events[e.presets[e.currentServer].currentEvent]},activeUsers(e){return e.users.filter((e=>!0===e.isActive))},defaultCoins(e,t){return t.currentPresetEvent.coinsDefault},defaultPrizeCount(e){return e.defaultPrizeCount},isCommandPersonal(e,t){return t.currentPresetEvent.isCommandPersonal},command(e,t){return t.currentPresetEvent.command||t.currentPreset.command},commandPattern(e,t){return t.currentPresetEvent.commandPattern||t.currentPreset.commandPattern},commandSeparator(e,t){return t.currentPresetEvent.commandSeparator||t.currentPreset.commandSeparator},commandResult(e,t){return zt({isCommandPersonal:t.isCommandPersonal,command:t.command,commandPattern:t.commandPattern,commandSeparator:t.commandSeparator,users:t.activeUsers})},servers(e){return Object.keys(e.presets)},eventsTime(e){return e.eventsTime},eventCount(e){return Wt(e.eventsTime.actions)},isEventActive(e){return At(e.eventsTime.actions)},isEventsStopped(e){return-1!==e.eventsTime.actions.at(-1).end},isUpdaterActive(e){return null!==e.updater.interval}},mutations:{updateUser(e,{_key:t=0,update:n=(e=>e)}){e.users=e.users.map((e=>e._key===t?n(e):e))},updateUsers(e,t=(e=>e)){e.users=e.users.map((e=>t(e)))},removeUser(e,t=0){e.users=e.users.filter((e=>e._key!==t))},addUser(e,{_key:t=Math.floor(1e7*Math.random()),id:n="",name:s="",coins:r=e.presets[e.currentServer].events[e.presets[e.currentServer].currentEvent].coinsDefault,prizeCount:i=e.defaultPrizeCount,status:o=$.Init,isActive:a=!1,times:u={actions:[{type:At(e.eventsTime.actions)?z.Event:z.Other,index:At(e.eventsTime.actions)?Wt(e.eventsTime.actions)-1:-1,start:Date.now(),end:-1,points:[{ms:Date.now(),action:W.Disabled,isOnline:!1}]}],online:0}}){e.users.push({_key:t,id:n,name:s,coins:r,prizeCount:i,status:o,isActive:a,times:u})},setCurrentServer(e,t=""){e.currentServer=t},setDefaultCoins(e,t=0){e.defaultCoins=t},setDefaultPrizeCount(e,t=0){e.defaultPrizeCount=t},updateCurrentPreset(e,t=(e=>e)){e.presets[e.currentServer]=t(e.presets[e.currentServer])},updaterStart(e){e.updater.interval=setInterval((()=>{for(const t of e.updater.functions)t()}),e.updater.refreshTimer)},updaterStop(e){null!==e.updater.interval&&(clearInterval(e.updater.interval),e.updater.interval=null)},updaterAddFunction(e,t=(()=>{})){e.updater.functions.push(t)},eventActionToggle(e){e.eventsTime=B(e.eventsTime,Wt(e.eventsTime.actions),At(e.eventsTime.actions))},eventSetOnline(e,t=0){e.eventsTime.online=t},eventsEndToggle(e,t=!1){e.eventsTime=H(e.eventsTime,t)}},actions:{}});const Rt=n(9771),Nt=(0,s.ri)(Ot);Rt.keys().forEach((e=>{Nt.component(Rt(e).default.name,Rt(e).default)})),Nt.use(qt).mount("#root")},4929:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3396);const r={type:"button",class:"text-white bg-zinc-700 hover:bg-zinc-600 border-none rounded"};function i(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("button",r,[(0,s.WI)(e.$slots,"default")])}var o={name:"VButton"},a=n(89);const u=(0,a.Z)(o,[["render",i]]);var l=u},9159:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(3396);const r={class:"relative cursor-pointer"},i=["disabled","checked"],o=(0,s._)("span",{class:"w-full h-full bg-red-700 absolute rounded"},null,-1);function a(e,t,n,a,u,l){return(0,s.wg)(),(0,s.iD)("label",r,[(0,s._)("input",{disabled:n.disabled,type:"checkbox",class:"input__checkbox appearance-none absolute z-0 top-0 left-0 right-0 bottom-0 focus-visible:outline-offset-1",checked:n.checked,onChange:t[0]||(t[0]=(...e)=>l.onChange&&l.onChange(...e))},null,40,i),o])}var u={name:"VInputCheckbox",emits:{change:null},props:{checked:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},methods:{onChange(e){this.$emit("change",e.target.checked)}}},l=n(89);const c=(0,l.Z)(u,[["render",a]]);var d=c},118:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3396);const r=["value","placeholder","min","max"];function i(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("input",{type:"number",class:"input__string",onInput:t[0]||(t[0]=(...e)=>a.updateInput&&a.updateInput(...e)),value:n.value,placeholder:n.placeholder,min:n.min,max:n.max},null,40,r)}var o={name:"VInputNumber",emits:{input:null},methods:{updateInput(e){this.$emit("input",+e.target.value)}},props:{value:{type:Number,default:""},placeholder:{type:String,default:""},min:{type:Number,require:!1},max:{type:Number,require:!1}}},a=n(89);const u=(0,a.Z)(o,[["render",i]]);var l=u},4699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n(3396),r=n(7139),i=n(9242);const o={class:"button__select"},a=(0,s._)("span",null,"▼",-1),u={class:"absolute z-10 w-full flex flex-col bg-zinc-700"},l=["onClick"];function c(e,t,n,c,d,p){return(0,s.wg)(),(0,s.iD)("button",{class:"cnt__select",onBlur:t[0]||(t[0]=e=>d.open=!1),onClick:t[1]||(t[1]=e=>p.clickHandler()),onKeydown:t[2]||(t[2]=e=>p.toggleAciveSelect(e))},[(0,s._)("div",o,[(0,s._)("span",null,(0,r.zw)(n.defaultOption),1),a]),(0,s.wy)((0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.options,(e=>((0,s.wg)(),(0,s.iD)("div",{key:Math.floor(1e8*Math.random()),class:(0,r.C_)({button__select:!0,"hover:bg-zinc-600":e!==d.selectedOption,active:e===d.selectedOption}),onClick:(0,i.iM)((t=>p.select(e)),["stop"])},(0,r.zw)(e),11,l)))),128))],512),[[i.F8,d.open]])],32)}n(2262),n(4506);var d={name:"VInputSelect",data(){return{open:!1,selectedOption:this.defaultOption}},props:{options:{type:Array,required:!0},defaultOption:{type:String,required:!0}},methods:{clickHandler(){this.open=!this.open,this.selectedOption!==this.defaultOption&&this.select(this.selectedOption)},toggleAciveSelect(e){if(!1!==this.open)switch(e.code){case"KeyW":case"ArrowUp":{e.preventDefault();let t=this.options.findIndex((e=>e===this.selectedOption));return 0===t?void(this.selectedOption=this.options.at(-1)):void(this.selectedOption=this.options[t-1])}case"KeyS":case"ArrowDown":{e.preventDefault();let t=this.options.findIndex((e=>e===this.selectedOption));return t===this.options.length-1?void(this.selectedOption=this.options[0]):void(this.selectedOption=this.options[t+1])}}},select(e){e!==this.defaultOption?(this.selectedOption=e,this.$emit("input",e),this.open=!1):this.open=!1}},watch:{defaultOption(){this.selectedOption!==this.defaultOption&&(this.selectedOption=this.defaultOption)},open(e){!1===e&&(this.selectedOption=this.defaultOption)}}},p=n(89);const m=(0,p.Z)(d,[["render",c]]);var v=m},6733:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3396);const r=["type","placeholder"];function i(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("input",{type:n.hidden?"password":"text",placeholder:n.placeholder,onInput:t[0]||(t[0]=(...e)=>a.updateInput&&a.updateInput(...e)),class:"input__string"},null,40,r)}var o={name:"VInputText",emits:{input:null},methods:{updateInput(e){this.$emit("input",e.target.value)}},props:{placeholder:{type:String,default:""},hidden:{type:Boolean,default:!1}}},a=n(89);const u=(0,a.Z)(o,[["render",i]]);var l=u},503:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(3396),r=n(9242),i=n(7139);const o=["data-modalId"],a={class:"flex justify-between items-center"},u={class:"uppercase"},l={class:"flex flex-wrap justify-end gap-2"},c={class:"w-full max-h-[500px] overflow-y-scroll scrollbar"};function d(e,t,n,d,p,m){const v=(0,s.up)("v-button");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"fixed flex justify-center items-center top-0 left-0 bottom-0 right-0 bg-zinc-600 bg-opacity-40 w-full h-full z-10","data-modalId":n.modalId,onClick:t[1]||(t[1]=(...e)=>m.close&&m.close(...e))},[(0,s._)("div",{onClick:t[0]||(t[0]=(0,r.iM)((()=>{}),["stop"])),class:"rounded-md bg-zinc-800 flex flex-col gap-3 min-w-[280px] w-2/5 p-3.5"},[(0,s._)("header",a,[(0,s._)("h1",u,(0,i.zw)(n.modalTitle),1),(0,s._)("div",l,[(0,s.WI)(e.$slots,"buttons",{class:"py-2 px-3"}),(0,s.Wm)(v,{class:"py-2 px-3 bg-red-700 hover:bg-red-800",onClick:m.close},{default:(0,s.w5)((()=>[(0,s.Uk)("x")])),_:1},8,["onClick"])])]),(0,s._)("main",c,[(0,s.WI)(e.$slots,"body")])])],8,o)),[[r.F8,n.show]])}var p={name:"VModal",emits:{close:null},props:{show:{type:Boolean,required:!0},modalTitle:{type:String,required:!0},modalId:{type:String}},methods:{close(){this.$emit("close",null)}},watch:{show(){this.show?document.querySelector("body").classList.add("overflow-hidden"):document.querySelector("body").classList.remove("overflow-hidden")}}},m=n(89);const v=(0,m.Z)(p,[["render",d],["__scopeId","data-v-22e8334d"]]);var h=v},3862:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3396),r=n(7139);function i(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(a.className)},null,2)}var o={name:"VStatus",props:{status:{type:String,require:!0}},computed:{className(){const e={init:"hidden",loading:"bg-orange-700",success:"bg-green-700",error:"bg-red-700"};return`rounded-full ${e[this.status]}`}}},a=n(89);const u=(0,a.Z)(o,[["render",i]]);var l=u},1430:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3396);const r=["placeholder","value"];function i(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("textarea",{class:"resize-none bg-zinc-900 rounded-md px-2 py-3 scrollbar",placeholder:n.placeholder,value:n.value},null,8,r)}var o={name:"VTextarea",props:{value:{type:String,default:""},placeholder:{type:String,default:""}}},a=n(89);const u=(0,a.Z)(o,[["render",i]]);var l=u},9771:function(e,t,n){var s={"./VButton.vue":4929,"./VInputCheckbox.vue":9159,"./VInputNumber.vue":118,"./VInputSelect.vue":4699,"./VInputText.vue":6733,"./VModal.vue":503,"./VStatus.vue":3862,"./VTextarea.vue":1430};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id=9771}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,r,i){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],i=e[c][2];for(var a=!0,u=0;u<s.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[u])}))?s.splice(u--,1):(a=!1,i<o&&(o=i));if(a){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],a=s[1],u=s[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(u)var c=u(n)}for(t&&t(s);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},s=self["webpackChunkcmd_generator_vue"]=self["webpackChunkcmd_generator_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(2918)}));s=n.O(s)})();
//# sourceMappingURL=app.8681f25b.js.map